# User-Service

## Описание

`User-Service` — это сервис для работы с пользователями. Он позволяет управлять флагами "проблем" у пользователей и подсчитывать количество пользователей, у которых этот флаг был установлен в `true`.

Сервис использует **NestJS** и базу данных **PostgreSQL** для хранения данных. Реализован REST API для взаимодействия.

---

## Возможности

### Функционал:
1. **Создание пользователей:** автоматическое наполнение базы данных пользователями.
2. **Сброс флага проблем:**
   - Сбрасывает флаг `problems` для всех пользователей.
   - Подсчитывает количество пользователей, у которых флаг был `true`.
3. **Поддержка REST API для работы с данными пользователей.**

---

## Структура базы данных

- **Таблица: `user`**
  | Поле      | Тип        | Описание                   |
  |-----------|------------|----------------------------|
  | `id`      | `SERIAL`   | Уникальный идентификатор   |
  | `firstName` | `VARCHAR`  | Имя пользователя           |
  | `lastName`  | `VARCHAR`  | Фамилия пользователя       |
  | `age`       | `INTEGER`  | Возраст                   |
  | `gender`    | `VARCHAR`  | Пол (`male`/`female`)      |
  | `problems`  | `BOOLEAN`  | Есть ли проблемы (`true`/`false`) |

---

## Инструкция по развертыванию

### Шаг 1: Установите зависимости

1. Убедитесь, что у вас установлен Node.js и npm.
2. Установите зависимости:
   ```bash
   npm install
   ```

---

### Шаг 2: Настройка базы данных

1. Убедитесь, что PostgreSQL запущен.
2. Создайте базу данных `user_service`:
   ```sql
   CREATE DATABASE user_service;
   ```
---

### Шаг 3: Запуск приложения

1. Запустите приложение:
   ```bash
   npm run start
   ```

---

## Использование API

### Эндпоинты:

1. **Заполнение базы данных**
   - **Метод:** `POST /users/populate`
   - **Описание:** Создаёт тестовые записи пользователей в базе данных.
   - **Ответ:**
     ```json
     {
       "message": "Users populated successfully!"
     }
     ```

2. **Сброс флага проблем**
   - **Метод:** `GET /users/reset-problems`
   - **Описание:** Сбрасывает флаг `problems` у всех пользователей и возвращает количество пользователей, у которых флаг был `true`.
   - **Ответ:**
     ```json
     {
       "count": 500000
     }
     ```
